%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Electronic invoice formats - A comparison
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Electronic invoice formats - A comparison}
\label{cha2}

During the digitalization of companies over the world, electronic invoices (also known as e-invoice) have become more and more important. E-Invoicing offers companies the possibility to improve their business processes, making invoicing faster and more efficient and enables a direct connection to other tools like ERP-Software. 

To give companies access to these benefits and to make the communication between companies even possible, a comprehensive standard must be defined. With an invoice standard at hand, companies can use invoices from their business partners and read them into their systems (in the case of Business-to-Business (B2B)). 

Several invoice standards are currently used. The next section will deal with the most important ones and describes them as well as pointing out the benefits and drawbacks of the format.
After that, the next section defines criteria that are relevant for the application and how to measure them.
In the last section, these criteria are applied to the formats defined in section \ref{sec2.1} and compared against each other. Eventually, a decision regarding the usage of one of these formats is made.

\section{Description of leading formats}
\label{sec2.1}

Each of the following subsections will present an electronic invoice format. The history of the format, as well as the current version and, if found, the future promise will be explained. As there exist many different formats, it is out of the scope of this thesis to describe them all.
Instead, we will pick a few that seem important and promising in regards to Germany's and the EU's demands towards an invoice standard. 

\subsection{UN/EDIFACT}
\label{sec2.1.1}

EDIFACT is a well-established \cite{basware} subset of standards from CEFACT regarding the electronic interchange of structured data. The word 'EDIFACT' is an acronym from 'EDI' which stands for 'Electronic Data Interchange' in combination with 'FACT' (for Administration, Commerce, and Transport). It is developed and maintained by the United Nations Economic Commission for Europe (UNECE) \cite{unece}.

The European Commission states that the UN/EDIFACT INVOIC message has been a 'cornerstone' in electronic invoicing over the past years \cite[page 14]{ec12}.

There are several subsets of EDIFACT that have been developed for different industries. For instance, the chemical industry uses CEFIC/ESCom\footnote{see also: \url{https://www.cefic.org/Industry-support/Implementing-reach/escom/}} as their standard, while the automotive industry is in charge with ODETTE/FTP2\footnote{see also: \url{https://www.odette.org/services/oftp2}}.

EDIFACT has different message types such as \emph{ORDCHG} for a request to change an order or \emph{PAYORD} which contains a payment order. In the context of this thesis, the message type \emph{INVOIC} (containing an invoice) is the most interesting one.

\subsection{XCBL}
\label{sec2.1.2}

The XML Common Business Library is an extension of the CBL which originally has been developed by Veo Systems Inc. \cite{coverpages}. The company has been bought by Commerce One Inc. in 1999 \cite{co}, page 29. 

xCBL currently exists in version 4.0 (since 2003)\footnote{see also: \url{https://www.xcbl.org}}. Since the company has gone bankrupt in 2004 \cite{scm} it is not very likely that this format gains more interest in the future.

\subsection{OASIS/UBL}
\label{sec2.1.3}

UBL stands for Universal Business Language and is being developed by OASIS. The current version is 2.1 and is normed by the international standardization organization\footnote{see ISO/IEC 19845:2015}.

Several countries developed their own subset of this format. Especially interesting in this case is a project called PEPPOL (Pan-European Public Procurement Online project) that aims at developing a format for public sectors in the whole European Union\footnote {see also: \url{https://www.peppol.eu/about\textunderscore peppol/about-openpeppol-1}}. 

Also interesting in the context of invoice interchange is the UBL-based project called \emph{simplerinvoicing} that aims at connecting ERP systems with accounting and e-invoicing software by providing an own invoicing standard\footnote {see also: \url{www.simplerinvoicing.org/en/}}. 

\subsection{ZUGFeRD}
\label{sec2.1.4}

This invoice format has been published initially in 2014 \cite{Ferd14}. The name is a German acronym, containing the name of the corresponding forum (FeRD). It can be translated to ''Central User Guide of the Forum for electronic Invoicing in Germany''. 

Although this invoice format is rather young, it tries to fulfill the directive 2014/55/EU of the European parliament \cite{eu14} while still being flexible and simple. This directive states that the use of electronic invoice formats should be adopted by all member states of the European union until the 27. of November 2018 \cite[article 11]{eu14}. 
 
The approach of the ZUGFeRD-format enables not only big companies to work with that format, but also smaller and medium-sized enterprises (SMEs) that are in need of such a format but are normally not able to implement a complex electronic invoice standard. 
Furthermore, three levels of conformance are defined: Basic, Comfort, and Extended. Each of those levels has a different amount of required information fields, that have to be set in order to be valid. Nevertheless, in all of the three formats, it is possible to define more information in free text fields. 

This enables extensibility of the format and the possible business areas in which this standard can be used.

Based on the directive 2014/55/EU \cite{eu14} a bill draft has been developed by the federal government of Germany \cite[page 10]{br16} that suggests the usage of the ZUGFeRD standard to ensure interoperability. In addition to that, the federal association of energy market and communication (EDNA) also published a recommended course of action for the usage of the ZUGFeRD standard \cite{edna16}.

\subsection{ODETTE File Transfer Protocol}
\label{sec2.1.5}

The Odette International Ltd. is a non-profit organization founded in the 1980s with the goal to standardize processes in the supply-chain-management. One of their results is the Odette File Transfer Protocol, which was initially released in 1997 and has been further improved. The current version is 2.0 and has been released in 2007\footnote{See also \url{https://www.odette.org/services/oftp2} for further information}. It is a specially designed file transfer protocol for the automotive industry to improve the procurement process between suppliers and vehicle manufacturers. While it is widely used in the automotive sector, the Odette FTP is not applicable in other industry areas.

\subsection{SAP IDoc}
\label{sec2.1.6}

IDoc is an EDI-format developed by SAP SE. It is a proprietary technology to exchange messages in ERP-systems based on SAP. Due to the high amount of companies using an ERP-System by SAP it is a format that is often used in such systems.

\subsection{ANSI ASC X12}
\label{sec2.1.7}

The Accredited Standards Committee X12 has been founded by the ANSI (American National Standards Institute) in 1979. The goal of the committee was (and is) the development of EDI standards. The first release of the X12 standard was in 1982, but the current version is 7040. The standard is mainly active in the United States of America but has also influenced the development of the EDIFACT standard

\section{Definition of decision criteria}
\label{sec2.2}

While the standards defined in the section before focusing on specific areas or try to combine multiple fields, this section defines the criteria that are most relevant for the application that is developed.

% Zukunftssicherheit / Aussichtsreichtum
\subsection{Future Potential}
\label{sec2.2.1}
One of the major criteria for a suitable invoice standard should be its future potential. Developing an application that makes use of a format that will be obsolete after a short time makes little sense. Therefore, any standard that is going to be replaced should not be considered useful.

% Relevanz in Deutschland + Relevanz in Europa
\subsection{Relevance in Germany (and Europe)}
\label{sec2.2.2}
As this thesis is being written at a German university, the chosen standard should be relevant in Germany. The more countries make use of this standard (especially European countries) the higher the relevance of this standard. On the other Hand, standards that are not of interest for Europe should be excluded.

% Möglichkeiten der Erweiterung in Bezug auf die Länder
\subsection{Extendibility to more countries}
\label{sec2.2.3}
The possibilities of a standard to be used in other countries will also affect its importance over the next decades. Standards that only suits the requirements of one country are not important enough. The focus lies on standards with a wide (possible) range of countries to be affected, instead.

% Erweiterbarkeit des Standards allgemein bzw. was deckt er ab?
\subsection{Expandability of the standard itself}
\label{sec2.2.4}
The expandability of the standard itself is an important criterion. The world is changing and new requirements are coming while older ones are getting broken up. A valuable standard should be able to deal with these changes and should be expandable towards new requirements, or special requirements in specific business areas.

% Komplexität
\subsection{Complexity}
\label{sec2.2.5}
The complexity of the standard is important for this thesis too. First, the development of the application is limited by time. And secondly, a difficult to understand standard more error-prone.

% Availability
\subsection{Availability}
\label{sec2.2.6}

Some of the presented invoice standards are commercial products and must be purchased to be used. In addition to the costs of those products, a free-to-use product would also affect the acceptance for SMEs due to lower costs. Hence we will exclude proprietary products from the list of choices. 

\section{Comparison and decision finding}
\label{sec2.3}

Even though electronic data interchange is used for decades, there is still no absolute standard. Depending on the location (ANSI X12, EDIFACT) or the industrial sector (ODETTE FTP) different solutions exist. As proposed by the criteria in the section before, we want to find an electronic invoice format that has the best future benefit. We will now apply all criteria on the presented invoice standards and then decide which invoice format we want to support.

\subsection{Application of the criteria}
\label{sec2.3.1}

The future potential between the described standards is different. Especially the release date of the last version shows the recent activity of a format. While EDIFACT is regularly updated (twice a year) the last version of the XCBL standard is from 2003. The UBL is currently in version 2.1 that has been released 2013, but there is already a draft existing regarding a version 3.0\footnote{The draft can be found here: \url{http://docs.oasis-open.org/ubl/UBL-NDR/v3.0/cnprd01/UBL-NDR-v3.0-cnprd01.html}, last visited on 10.03.2017}. ZUGFeRD is a very new invoice standard compared with the release dates of the other standards. Version 1.0 has been published in 2016, a new version 2.0 has already announced in a FeRD newsletter from 2016\footnote{The newsletter can be found here: \url{http://www.ferd-net.de/front_content.php?idart=1203}, last visited on 10.03.2017}. The File Transfer Protocol by Odette is from 2007. We were not able to retrieve version information regarding the IDoc standard by SAP whereas the X12 standard by the ANSI ASC has recently (in 2017) been updated to version 7040.

The relevance of EDIFACT in Germany can be considered high due to the amount of companies that use this standard. This applies especially on big companies that have special contracts with their suppliers. We could not find any information regarding the usage of the XCBL standard. The UBL has been initially used in Denmark but spread around other countries, mostly inside Europe (\url{http://ubl.xml.org/wiki/ubl-faq}). Hence a certain relevance in Europe is given. ZUGFeRD has been developed by a German forum. Since this standard is very new, the current relevance is rather low, but will increase because of the goal of the European Union to standardize e-procurement and the fact, that this standard is already used by the German state administration \cite{awv16}. Odette FTP has relevance in Germany due to several big automotive companies and their suppliers that are seated in Germany. 

EDIFACT offers several subsets of the standard, depending on the industrial sector of the company. Because of the number of subsets and the possibilities each of them provide, EDIFACT can be considered a very detailed and therefore complex standard. The standard implementation of the UBL standard faces the same problem. The technical committee of the UBL has developed the Small Business Subset especially designed to address this issue (\url{https://docs.oasis-open.org/ubl/cs-UBL-1.0-SBS-1.0/}). ZUGFeRD has been designed with three different levels of complexity. Hence the complexity differs by the use-case. We have not found any information regarding the complexity of the Odette FTP.

The following table sums up these findings to make the comparison between those invoice standards easier:

\begin{table}[!htb]
\centering
\resizebox{\textwidth}{!}{%
\begin{tabular}{lcccc}
\hline
Invoice standard & \textbf{EDIFACT} & \textbf{UBL} & \textbf{ZUGFeRD} & \textbf{Odette FTP} \\ \hline
Future Potential & \cellcolor[HTML]{FFFFFF}\begin{tabular}[c]{@{}c@{}}New Version\\ twice a year\end{tabular} & \cellcolor[HTML]{FFFFFF}\begin{tabular}[c]{@{}c@{}}Version 2.1 (2013),\\ Version 3 already\\ exists as a draft\end{tabular} & \cellcolor[HTML]{FFFFFF}\begin{tabular}[c]{@{}c@{}}Version 1.0 (2016),\\ Version 2.0 \\ announced for 2017\end{tabular} & \cellcolor[HTML]{FFFFFF}Version 2.0 (2007) \\ \hline
\begin{tabular}[c]{@{}l@{}}Relevance in Germany\\ (and Europe)\end{tabular} & \cellcolor[HTML]{FFFFFF}\begin{tabular}[c]{@{}c@{}}International relevance \\ due to a lot of users. \\ Not specialized on Germany\end{tabular} & \cellcolor[HTML]{FFFFFF}\begin{tabular}[c]{@{}c@{}}Initially used in \\ Denmark, main \\ usage in Europe\end{tabular} & \cellcolor[HTML]{FFFFFF}\begin{tabular}[c]{@{}c@{}}Highly relevant,\\ especially in \\ Germany but also\\ in Europe\end{tabular} & \cellcolor[HTML]{FFFFFF}\begin{tabular}[c]{@{}c@{}}Relevant in Germany\\ due to big\\ automotive \\ companies\\ and their suppliers\end{tabular} \\ \hline
Complexity & \cellcolor[HTML]{FFFFFF}\begin{tabular}[c]{@{}c@{}}Highly complex \\ due to the many \\ possible options \\ and message types\end{tabular} & \cellcolor[HTML]{FFFFFF}\begin{tabular}[c]{@{}c@{}}Complex (normal UBL)\\ or simpler \\ (Small Business Subset)\end{tabular} & \cellcolor[HTML]{FFFFFF}\begin{tabular}[c]{@{}c@{}}Depending on the\\ use case \\ from simple\\ to complex\end{tabular} & \cellcolor[HTML]{FFFFFF}N.A. \\ \hline
\end{tabular}%
}
\caption{Comparison between invoice standards}
\label{invoiceStandardComparison}
\end{table}

\subsection{Decision and explanation}
\label{sec2.3.2}

Comparing the invoice standards, we want to support one standard. While the versions of EDIFACT, UBL and ZUGFeRD have been updated recently, the Odette FTP still comes with a version of 2007. In addition to that, the Odette FTP may be used heavily in the automotive sector, but not in other industrial areas. Hence we will not support the Odette FTP in this version of the application.

Even though EDIFACT has an international relevance and a high future potential, the complexity of the standard makes it hard to support it completely. Since we have a limited time for the creation of this thesis, we will not support the EDIFACT standard\footnote{But it would be a possible improvement of the application for the future (see also section \ref{sec6.3})}. 

UBL and ZUGFeRD both have a high future potential. They are both relevant in Europe and are not complex to be implemented. There are two reasons, why we decide to use the ZUGFeRD standard:
\begin{enumerate}
	\item We would not be able to support UBL as a whole. Only the small business subset could be supported in the scope of this thesis.
	\item ZUGFeRD is highly relevant in Germany and, in addition to that, will be very likely a future standard in Europe.
\end{enumerate}

The following table will sum up our decision again:

\begin{table}[!htb]
\centering
\resizebox{\textwidth}{!}{%
\setlength{\aboverulesep}{0pt}
\setlength{\belowrulesep}{0pt}
\setlength{\extrarowheight}{.75ex}
\begin{tabular}{@{}lcccc@{}}
\toprule
Invoice standard & \textbf{EDIFACT} & \textbf{UBL} & \textbf{ZUGFeRD} & \textbf{Odette FTP} \\ \midrule
Future Potential & \cellcolor[HTML]{96D532}\begin{tabular}[c]{@{}c@{}}New Version\\ twice a year\end{tabular} & \cellcolor[HTML]{96D532}\begin{tabular}[c]{@{}c@{}}Version 2.1 (2013),\\ Version 3 already\\ exists as a draft\end{tabular} & \cellcolor[HTML]{96D532}\begin{tabular}[c]{@{}c@{}}Version 1.0 (2016),\\ Version 2.0 \\ announced for 2017\end{tabular} & \cellcolor[HTML]{FD4703}Version 2.0 (2007) \\ \midrule
\begin{tabular}[c]{@{}l@{}}Relevance in Germany\\ (and Europe)\end{tabular} & \cellcolor[HTML]{96D532}\begin{tabular}[c]{@{}c@{}}International relevance \\ due to a lot of users. \\ Not specialized on Germany\end{tabular} & \cellcolor[HTML]{96D532}\begin{tabular}[c]{@{}c@{}}Initially used in \\ Denmark, main \\ usage in Europe\end{tabular} & \cellcolor[HTML]{96D532}\begin{tabular}[c]{@{}c@{}}Highly relevant,\\ especially in \\ Germany but also\\ in Europe\end{tabular} & \cellcolor[HTML]{FFFE65}\begin{tabular}[c]{@{}c@{}}Relevant in Germany\\ due to big\\ automotive \\ companies\\ and their suppliers\end{tabular} \\ \midrule
Complexity & \cellcolor[HTML]{FD4703}\begin{tabular}[c]{@{}c@{}}Highly complex \\ due to the many \\ possible options \\ and message types\end{tabular} & \cellcolor[HTML]{FFFE65}\begin{tabular}[c]{@{}c@{}}Complex (normal UBL)\\ or simpler \\ (Small Business Subset)\end{tabular} & \cellcolor[HTML]{96D532}\begin{tabular}[c]{@{}c@{}}Depending on the\\ use case \\ from simple\\ to complex\end{tabular} & \cellcolor[HTML]{FFFE65}N.A. \\ \bottomrule
\end{tabular}%
}
\caption{Advantages and disadvantages of invoice standards}
\label{invoiceStandardRating}
\end{table}